# Kodama Session Template Example
#
# Place this file as `.kodama.yaml` in your repository root to configure
# default settings for Kodama sessions started in this repository.
#
# Priority: CLI flags > .kodama.yaml (this file) > ~/.kodama/config.yaml > defaults

# Repository configuration
repo: https://github.com/your-org/your-repo
branch: main

# Resource limits
resources:
  cpu: "2"
  memory: "4Gi"
  # Custom resources (e.g., GPU)
  # customResources:
  #   nvidia.com/gpu: "1"

# Environment variables from dotenv files
env:
  # Dotenv files to load (relative to repository root)
  # Files are read from your LOCAL machine (not from git)
  # Last file wins for duplicate variables
  dotenvFiles:
    - .env              # Base environment variables
    - .env.local        # Local overrides (add to .gitignore!)
    # - .env.production # Production-specific variables

  # Additional variables to exclude from injection (beyond system defaults)
  # System defaults are automatically excluded: PATH, HOME, KUBERNETES_*, CLAUDE_*
  excludeVars:
    - VERBOSE           # Example: exclude debug/verbose flags
    - DEBUG_MODE        # Example: exclude local debugging options
    # - CI              # Example: exclude CI-specific variables

# File synchronization
sync:
  useGitignore: true
  exclude:
    - "*.log"
    - "tmp/"
    - "node_modules/"
    - ".git/"
    - "__pycache__/"

  # Sync additional directories (e.g., dotfiles)
  # customDirs:
  #   - source: ~/.config/helix
  #     destination: /root/.config/helix

# Git clone configuration
gitClone:
  depth: 0              # 0 = full clone, >0 = shallow clone
  singleBranch: false   # true = clone only specified branch
  # extraArgs: "--recurse-submodules"  # Additional git clone arguments

# Ttyd (web terminal) configuration
ttyd:
  enabled: true
  port: 7681
  writable: true        # false = read-only terminal
  # options: "-t fontSize=16"  # Additional ttyd options

# Claude Code authentication override (optional)
# claudeAuth:
#   authType: token     # "token" or "file"
#   secretName: claude-token-secret  # K8s secret name (for token auth)
#   profile: default    # Profile name (for file auth)

# Example: Minimal configuration
# ---
# env:
#   dotenvFiles:
#     - .env
#     - .env.local

# Example: Production environment
# ---
# env:
#   dotenvFiles:
#     - .env.production
#   excludeVars:
#     - DEBUG_MODE
#     - VERBOSE
# resources:
#   cpu: "4"
#   memory: "8Gi"

# Example: Development with GPU
# ---
# env:
#   dotenvFiles:
#     - .env.development
# resources:
#   cpu: "2"
#   memory: "4Gi"
#   customResources:
#     nvidia.com/gpu: "1"
